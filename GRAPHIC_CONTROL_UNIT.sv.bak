module GRAPHIC_CONTROL_UNIT (HF_CLK, INS, VSN, C_INS, SID_CLM, SID_ROW, PGA_CLM, PGA_ROW, WRITE, GIM_ADD);

	input  logic        HF_CLK, VSN;
	input  logic [31:0] INS, C_INS;
	output logic [9:0]  PGA_CLM, PGA_ROW, GIM_ADD;
	output logic [4:0]  SID_CLM, SID_ROW;
	output logic WRITE;
	
	logic [9:0] NEW_INS_ADD, READ_INS_ADD;
	logic RST_INS_COUNT, CHANGE_C_INS, ALL_INS_CMLPTED, SID_CLM_CLK, SID_ROW_CLK, EQU, INVISIBLE_INS, INS_CMLPTED, PGA_CLM_COUT, PGA_ROW_COUT;
	logic [4:0] W_SID_CLM, W_SID_ROW;
	
	NEW_INSTRUCTION_VERIFICATOR 
		NIV (CLK, RST, INS, EQU, WRITE);
	
	COUNTER_MODULE 
		NEW_INS_CM  (EQU,          RST_INS_COUNT, NEW_INS_ADD),
		READ_INS_CM (CHANGE_C_INS, RST_INS_COUNT, READ_INS_ADD),
		SID_CLM_CM  (HF_CLK,       VSN,           W_SID_CLM),
		SID_ROW_CM  (SID_CLM_CLK,  VSN,           W_SID_ROW);
		
	N_BITS_ONE_SELECT_MUX_MODULE #(10)
		INS_ADD_MUX (NEW_INS_ADD, READ_INS_ADD, EQU, GIM_ADD);
		
	EQUAL_COMPARATOR_MODULE #(10) 
		ALL_INS_CMLPTED_CMP (NEW_INS_ADD, READ_INS_ADD, ALL_INS_CMLPTED);
	EQUAL_COMPARATOR_MODULE #(5)
		SID_CLM_CMP (W_SID_CLM, 5'd32, SID_CLM_CLK),
		SID_ROW_CMP (W_SID_ROW, 5'd32, SID_ROW_CLK);
	EQUAL_COMPARATOR_MODULE #(3)
		INVISIBLE_INS_CMP (C_INS[12:10], 3'b111, INVISIBLE_INS);
	
	ADDER_MODULE #(10) 
		PGA_CLM_ADDER (W_SID_CLM, C_INS[31:22], 1'b0, PGA_CLM, PGA_CLM_COUT),
		PGA_ROW_ADDER (W_SID_ROW, C_INS[21:13], 1'b0, PGA_ROW, PGA_ROW_COUT);
	
	_AND
		AND (SID_CLM_CLK, SID_ROW_CLK, INS_CMLPTED);
		
	_OR
		OR (INS_CMLPTED, INVISIBLE_INS, CHANGE_C_INS),
		OR (ALL_INS_CMLPTED, ~VSN, RST_INS_COUNT);
		
endmodule 